"""Configuration management for Ivan."""
import os
from typing import Literal
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

# Backend configuration
BACKEND_TYPE: Literal["lmstudio", "ollama", "gemini"] = os.getenv("IVAN_BACKEND", "gemini")

# LM Studio default endpoint
LMSTUDIO_ENDPOINT = os.getenv("LMSTUDIO_ENDPOINT", "http://localhost:1234/v1")

# Ollama default endpoint
OLLAMA_ENDPOINT = os.getenv("OLLAMA_ENDPOINT", "http://localhost:11434")

# Ollama Search API key (optional - enables web search via Ollama)
OLLAMA_API_KEY = os.getenv("OLLAMA_API_KEY", "")

# Gemini/Vertex AI configuration
# Uses application default credentials via: gcloud auth application-default login
# Set GOOGLE_GENAI_USE_VERTEXAI=True to use Vertex AI with ADC
# Set GOOGLE_CLOUD_PROJECT and GOOGLE_CLOUD_LOCATION for your GCP project
GOOGLE_CLOUD_PROJECT = os.getenv("GOOGLE_CLOUD_PROJECT", "")
GOOGLE_CLOUD_LOCATION = os.getenv("GOOGLE_CLOUD_LOCATION", "us-central1")
GOOGLE_GENAI_USE_VERTEXAI = os.getenv("GOOGLE_GENAI_USE_VERTEXAI", "True")

# Model name to use with the backend
BACKEND_MODEL = os.getenv("BACKEND_MODEL", "gemini-2.5-pro")

# Ivan configuration
DEFAULT_PORT = int(os.getenv("IVAN_PORT", "8000"))
WEBUI_PORT = int(os.getenv("WEBUI_PORT", "8080"))  # Starting port for Open Web UI (auto-increments if in use)
DEFAULT_TEMPERATURE = float(os.getenv("IVAN_TEMPERATURE", "0.0"))
SYSTEM_PROMPT_PATH = os.getenv("SYSTEM_PROMPT_PATH", "system_prompt.md")

# Debug settings
DEBUG_TOOLS = os.getenv("IVAN_DEBUG_TOOLS", "").lower() in ("true", "1", "yes")
DEBUG_TOOLS_LOG_FILE = os.getenv("IVAN_DEBUG_TOOLS_LOG_FILE", "ivan_tools_debug.log")

# Customer notes directory for meeting notes search
# Users can either:
# 1. Create a symlink: ln -s /path/to/your/Customer_Notes ./Customer_Notes
# 2. Set CUSTOMER_NOTES_DIR environment variable to the full path
CUSTOMER_NOTES_DIR = os.getenv("CUSTOMER_NOTES_DIR", "Customer_Notes")

# Customer name aliases for abbreviations and alternate names
# Maps search terms (lowercase) to the actual directory names or patterns
CUSTOMER_ALIASES = {
    # Add more aliases as needed
}

# Model identifier that Ivan advertises
IVAN_MODEL_NAME = "wwtfo/ivan"
